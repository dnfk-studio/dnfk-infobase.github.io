<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>會議資料｜暗夜飛鳶線上資訊庫</title>
    <link rel="stylesheet" href="../assets/css/site.css">
  </head>
  <body>
    <canvas id="starfield"></canvas>
    <div class="twinkle" id="tw"></div>

    <div class="intro-underlay" data-autoremove>
      <div class="lines">
        <div class="line run" style="top:5%; --d:.05s; --t:.55s"></div>
        <div class="line v run" style="left:10%; --d:.10s; --t:.60s"></div>
        <div class="line run" style="top:40%; --d:.18s; --t:.50s"></div>
        <div class="line run" style="top:60%; --d:.22s; --t:.60s"></div>
        <div class="line v run" style="left:85%; --d:.26s; --t:.58s"></div>
        <div class="line run" style="bottom:8%; --d:.28s; --t:.65s"></div>
      </div>
    </div>

    <section class="hero" id="top">
      <div class="hero-inner">
        <div class="divider"></div>
        <h1 class="title-zh page-title">會議資料</h1>
        <h2 class="title-en page-sub">會議資料｜暗夜飛鳶線上資訊庫</h2>
      </div>
    </section>

    <aside class="sidebar">
      <div class="brand">
        <img src="../logo/logo_white.png" alt="logo mini"/>
        <b>DNFK Studios</b>
      </div>
<nav class="sidenav">
  <a class="nav-item" href="../index.html">首頁</a>

  <div class="nav-group" id="grp-docs" data-open="false">
    <a class="nav-item" href="../documents/index.html">公文</a>
    <button class="caret" aria-label="展開公文" aria-expanded="false"></button>
    <div class="nav-sub"></div>
  </div>

  <div class="nav-group" id="grp-meeting" data-open="false">
    <a class="nav-item" href="../meeting/index.html">會議</a>
    <button class="caret" aria-label="展開會議" aria-expanded="false"></button>
    <div class="nav-sub"></div>
  </div>

  <div class="nav-group" id="grp-rule" data-open="false">
    <a class="nav-item" href="../rule/index.html">規章</a>
    <button class="caret" aria-label="展開規章" aria-expanded="false"></button>
    <div class="nav-sub"></div>
  </div>

  <div class="nav-group" id="grp-plan" data-open="false">
    <a class="nav-item" href="../plan/index.html">企劃</a>
    <button class="caret" aria-label="展開企劃" aria-expanded="false"></button>
    <div class="nav-sub"></div>
  </div>

  <a class="nav-item" href="../about.html">關於本網站</a>
</nav>
    </aside>

    <main>
      <section class="card">
        <h3>檔案類型</h3>
        <p>會議議程、出席名冊、討論紀錄、決議事項與追蹤回報。</p>
      </section>
      <section class="card">
        <h3>導入建議</h3>
        <p>建議以「屆別／月份」歸檔，並提供議程與紀錄的快速交互鏈結。</p>
      </section>
    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <small>Copyright © 2025 DNFK Studios.</small>
      </div>
    </footer>

    <script>
      const cvs = document.getElementById('starfield'); const ctx = cvs.getContext('2d');
      let stars=[],W,H,sidebarPX=0;
      function resize(){ W=cvs.width=innerWidth; H=cvs.height=innerHeight; sidebarPX=(document.querySelector('.sidebar')?.offsetWidth)||0; }
      addEventListener('resize',resize,{passive:true}); resize();
      for(let i=0;i<160;i++){ stars.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.2+0.2,s:Math.random()*0.6+0.2,a:Math.random()*360}); }
      const CONSTS=[{points:[[0.58,0.24],[0.63,0.20],[0.68,0.23],[0.72,0.19],[0.77,0.22]]},{points:[[0.32,0.66],[0.36,0.62],[0.41,0.64],[0.45,0.61]]}];
      function drawConstellations(t=0){const la=0.28+0.12*Math.sin(t/1300);const na=0.60+0.25*Math.sin(t/900);ctx.save();ctx.lineWidth=1;ctx.lineCap='round';ctx.strokeStyle=`rgba(207,225,255,${la.toFixed(3)})`;ctx.fillStyle=`rgba(255,255,255,${na.toFixed(3)})`;for(const c of CONSTS){const pts=c.points.map(([nx,ny])=>[sidebarPX+nx*(W-sidebarPX),ny*H]);ctx.beginPath();ctx.moveTo(pts[0][0],pts[0][1]);for(let i=1;i<pts.length;i++)ctx.lineTo(pts[i][0],pts[i][1]);ctx.stroke();for(const [x,y] of pts){ctx.beginPath();ctx.arc(x,y,2.1,0,Math.PI*2);ctx.fill();}}ctx.restore();}
      function loop(t=0){ctx.clearRect(0,0,W,H);for(const st of stars){st.x+=st.s*0.2;st.y+=Math.sin((st.a+=0.02))*0.15;if(st.x>W+4)st.x=-4;ctx.beginPath();ctx.arc(st.x,st.y,st.r,0,Math.PI*2);ctx.fillStyle='rgba(255,255,255,.75)';ctx.fill();}drawConstellations(t||0);requestAnimationFrame(loop);}requestAnimationFrame(loop);
      const tw=document.getElementById('tw'); const frag=document.createDocumentFragment();
      for(let i=0;i<60;i++){const s=document.createElement('span'); s.style.left=(Math.random()*100)+'%'; s.style.top=(Math.random()*100)+'%'; s.style.animationDelay=(Math.random()*6)+'s'; s.style.opacity=Math.random()*0.8+0.2; frag.appendChild(s);} tw.appendChild(frag);
(() => {
  const canon = (p) => p.replace(/index\.html?$/i, "").replace(/\/+$/, "/");
  const here  = canon(location.pathname);

  // 1) 目前頁高亮
  document.querySelectorAll('.sidebar .nav-item[href]').forEach(a => {
    const path = canon(new URL(a.getAttribute('href'), location.href).pathname);
    if (path === here) {
      a.classList.add('active');
      a.setAttribute('aria-current','page');
    }
  });

  // 2) 三角開合 + 所屬自動展開
  document.querySelectorAll('.sidebar .nav-group').forEach(group => {
    const parentLink = group.querySelector('.nav-item[href]');
    const caret      = group.querySelector('.caret');
    const sub        = group.querySelector('.nav-sub');

    const parentPath = canon(new URL(parentLink.getAttribute('href'), location.href).pathname);
    const inSection  = here.startsWith(parentPath) && here !== parentPath;

    function setOpen(open){
      group.dataset.open = open ? 'true' : 'false';
      caret.setAttribute('aria-expanded', String(open));
      if (open) {
        sub.style.maxHeight = sub.scrollHeight + 'px';
        sub.style.opacity = '1';
        sub.style.transform = 'translateY(0)';
      } else {
        sub.style.maxHeight = '0px';
        sub.style.opacity = '0';
        sub.style.transform = 'translateY(-2px)';
      }
    }
    // 初始化：如果當前位於該區的子頁，則自動展開
    setOpen(inSection);

    caret.addEventListener('click', (e) => {
      e.preventDefault(); e.stopPropagation();
      setOpen(group.dataset.open !== 'true');
    });

    // 視窗改變時，更新展開高度
    addEventListener('resize', () => {
      if (group.dataset.open === 'true') sub.style.maxHeight = sub.scrollHeight + 'px';
    });
  });

  // 3) 子連結（若有）高亮，並確保群組展開
  document.querySelectorAll('.sidebar .nav-sub .subbtn[href]').forEach(a => {
    const path = canon(new URL(a.getAttribute('href'), location.href).pathname);
    if (path === here) {
      a.classList.add('active');
      const group = a.closest('.nav-group');
      if (group) {
        group.dataset.open = 'true';
        const caret = group.querySelector('.caret');
        const sub   = group.querySelector('.nav-sub');
        if (caret && sub) {
          caret.setAttribute('aria-expanded', 'true');
          sub.style.maxHeight = sub.scrollHeight + 'px';
          sub.style.opacity = '1';
          sub.style.transform = 'translateY(0)';
        }
      }
    }
  });
})();
    </script>
  </body>
</html>
