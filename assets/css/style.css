

@import url('https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700&family=Noto+Sans+TC:wght@100;300;400;700&display=swap');

:root{
  --bg0:#262b33;
  --bg1:#262b33;
  --surface:#2e343d;
  --surface2:#323945;
  --panel:var(--surface);
  --text:#e9ecf2;
  --muted:rgba(233,236,242,.74);
  --stroke:rgba(233,236,242,.14);
  --shadow:0 10px 28px rgba(0,0,0,.30);
  --shadow2:0 8px 18px rgba(0,0,0,.22);
  --radius:16px;
  --radius2:20px;
  --gap:16px;
  --max:1180px;
  --accent:#a78bfa;
  --accent2:#34d399;
  --danger:#fb7185;
  --glass-blur:0px;
  --ease:cubic-bezier(.2,.9,.2,1);
  --font: "Lato", "Noto Sans TC", ui-sans-serif, system-ui, -apple-system, "Segoe UI", "PingFang TC", "Microsoft JhengHei", sans-serif;
}


:root[data-theme="light"]{
  --bg0:#f0f2f5;
  --bg1:#f0f2f5;
  --surface:#ffffff;
  --surface2:#f6f7f9;
  --panel:var(--surface);
  --text:#1b2230;
  --muted:rgba(27,34,48,.70);
  --stroke:rgba(27,34,48,.14);
  --shadow:0 14px 34px rgba(27,34,48,.12);
  --shadow2:0 10px 24px rgba(27,34,48,.10);
}


*{box-sizing:border-box}
html{height:100%}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--font);
  font-weight:300;
  color:var(--text);
  background: transparent;
  overflow-x:hidden;
}
a{color:inherit; text-decoration:none}
button,input,select{font:inherit}

h1,h2,h3,h4{font-weight:700}
p,li,small,span,div{font-weight:300}

::selection{background:rgba(167,139,250,.28)}
body::before{
  content:"";
  position:fixed; inset:0;
  z-index:-2;
  pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
  mix-blend-mode:overlay;
  opacity:.18;
}
body::after{content:""; position:fixed; inset:0; z-index:-3; pointer-events:none; background: var(--bg0);}

.bg-blobs{display:none !important}
.blob{
  position:absolute;
  width:min(62vmax,820px);
  aspect-ratio:1/1;
  border-radius:45% 55% 60% 40% / 45% 45% 55% 55%;
  filter: blur(30px);
  opacity:.28;
  transform:translate3d(0,0,0);
  background: radial-gradient(circle at 30% 30%, rgba(167,139,250,.75), rgba(167,139,250,.05) 60%);
}
.blob.b2{
  width:min(52vmax,700px);
  opacity:.22;
  background: radial-gradient(circle at 30% 30%, rgba(34,197,94,.72), rgba(34,197,94,.06) 60%);
}
#starfield{
  position:fixed; inset:0; width:100%; height:100%;
  pointer-events:none; opacity:.55;
}


.shell{
  min-height:100dvh;
  display:grid;
  grid-template-columns: 300px 1fr;
}
@media (max-width: 980px){
  .shell{grid-template-columns:1fr}
}


.sidebar{
  position:sticky; top:0;
  height:100dvh;
  padding:18px;
  border-right:1px solid var(--stroke);
  background: var(--surface);
}
.brand{
  display:flex; align-items:center; gap:12px;
  padding:12px 10px;
  border-radius:16px;
}
.brand img{width:42px; height:42px; border-radius:14px; box-shadow:var(--shadow2)}
.brand .title{line-height:1.1}
.brand .title b{display:block; font-size:14px}
.brand .title span{display:block; font-size:12px; color:var(--muted)}
.nav{
  margin-top:14px;
  display:flex; flex-direction:column; gap:8px;
}
.nav a{
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  border-radius:16px;
  border:1px solid transparent;
  color:var(--muted);
  transition: transform .25s var(--ease), background .25s var(--ease), border-color .25s var(--ease), color .25s var(--ease);
}
.nav a:hover{
  transform: translateY(-1px);
  border-color: var(--stroke);
  background: rgba(255,255,255,.06);
  color:var(--text);
}
.nav a.active{
  border-color: rgba(167,139,250,.40);
  background: linear-gradient(180deg, rgba(167,139,250,.18), rgba(255,255,255,.06));
  color:var(--text);
}
.nav .dot{width:6px; height:6px; border-radius:99px; background: var(--muted);
  box-shadow:0 0 0 4px rgba(167,139,250,.18);
}
.sidebar .side-actions{
  margin-top:auto;
  display:flex; gap:10px;
  padding-top:16px;
}
@media (max-width: 980px){
  .sidebar{display:none}
}


.topbar{
  position:sticky; top:0; z-index:40;
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px;
  border-bottom:1px solid var(--stroke);
  background: var(--surface);
}
:root[data-theme="light"] .topbar{background: var(--surface)}
.topbar .left{display:flex; align-items:center; gap:10px}
.iconbtn{
  border:1px solid var(--stroke);
  background: transparent;
  color:var(--text);
  border-radius:16px;
  padding:10px 12px;
  cursor:pointer;
  transition: transform .18s var(--ease), background .25s var(--ease), border-color .25s var(--ease);
}
.iconbtn:hover{transform: translateY(-1px); background: var(--surface2)}
.iconbtn:active{transform: translateY(0px) scale(.98)}

.pill{
  border:0;
  background: transparent;
  border-radius:0;
  padding:0;
  font-size:12px;
  color:var(--muted);
}

.meta-line{
  color: var(--muted);
  font-size:13px;
  line-height:1.6;
}
.meta-line strong{color:var(--text); font-weight:600}
.pipe{opacity:.65; margin:0 6px;}


.overlay{
  position:fixed; inset:0;
  background: rgba(0,0,0,.55);
  opacity:0; pointer-events:none;
  transition: opacity .25s var(--ease);
  z-index:60;
}
.overlay.show{opacity:1; pointer-events:auto}
.drawer{
  position:fixed; inset:0 auto 0 0;
  width:min(86vw, 340px);
  transform: translateX(-110%);
  z-index:70;
  padding:18px;
  border-right:1px solid var(--stroke);
  background: var(--surface);
}
:root[data-theme="light"] .drawer{background: var(--surface)}
.drawer .nav a{background: transparent}
.drawer .nav a:hover{background: rgba(255,255,255,.06)}
.drawer .close{margin-left:auto}


.main{
  padding:0;
}
.container{
  width:min(var(--max), calc(100% - 28px));
  margin: 0 auto;
  padding: 18px 0 44px;
}
.section-title{
  display:flex; align-items:flex-end; justify-content:space-between;
  gap:12px;
  margin: 18px 0 12px;
}
.section-title h1, .section-title h2{
  margin:0;
  font-size:22px;
  letter-spacing:.2px;
}
.section-title p{margin:0; color:var(--muted); font-size:13px}


.grid{
  display:grid;
  grid-template-columns: repeat(12, 1fr);
  gap: var(--gap);
}
.card{
  grid-column: span 12;
  border:1px solid var(--stroke);
  background: var(--surface);
  border-radius: var(--radius2);
  box-shadow: var(--shadow2);
  overflow:visible;
  transform: translateZ(0);
}
.card .inner{padding:16px}
.card .meta{
  display:flex; flex-wrap:wrap; gap:8px;
  align-items:center;
  color:var(--muted);
  font-size:12px;
}
.badge{
  display:inline;
  padding:0;
  border:0;
  border-radius:0;
  background: transparent;
  color:var(--muted);
  font-size:12px;
}
.badge strong{color:var(--text); font-weight:600}
.tags{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
.tag{
  padding:0;
  border:0;
  border-radius:0;
  background: transparent;
  color:var(--muted);
  font-size:12px;
}
.tag:hover{background: transparent}

.tags-text{color:var(--muted); font-size:12px}
.card h3{margin:10px 0 6px; font-size:18px}
.card p{margin:0; color:var(--muted); line-height:1.65}

.card.clickable{
  cursor:pointer;
  transition: transform .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease);
}
.card.clickable:hover{
  transform: translateY(-3px);
  box-shadow: var(--shadow);
  border-color: rgba(167,139,250,.35);
}

.actions{
  display:flex; flex-wrap:wrap; gap:10px;
  align-items:center;
  margin-top:14px;
}

.ver{
  color:var(--muted);
  font-size:12px;
  line-height:1;
}

.detailbtn{
  padding:10px 14px;
}

.detailbtn.primary{
  background: rgba(167,139,250,.12);
}

.detailbtn.primary:hover{
  background: rgba(167,139,250,.18);
}

.chevbtn{
  border:0;
  background:transparent;
  padding:10px 8px;
  cursor:pointer;
  color:var(--text);
  display:inline-flex;
  align-items:center;
  justify-content:center;
}

.chevbtn .chev{transition: transform .22s var(--ease)}
.chevbtn.is-open .chev{transform: rotate(180deg)}
.btn{
  border:1px solid var(--stroke);
  background: transparent;
  color:var(--text);
  padding:10px 14px;
  border-radius:8px;
  cursor:pointer;
  transition: transform .18s var(--ease), background .25s var(--ease), border-color .25s var(--ease);
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
}
.btn:hover{transform: translateY(-1px); background: var(--surface2); border-color: rgba(167,139,250,.35)}
.btn:active{transform: translateY(0px) scale(.98)}
.btn.primary{
  border-color: rgba(167,139,250,.45);
  background: rgba(167,139,250,.14);
}
.btn.danger{
  border-color: rgba(251,113,133,.45);
  background: rgba(251,113,133,.10);
}


.searchbar{
  display:flex; gap:10px; flex-wrap:wrap;
  padding:14px;
}
.searchbar input{
  flex:1 1 240px;
  border:1px solid var(--stroke);
  background: var(--surface);
  color:var(--text);
  border-radius: 18px;
  padding:12px 14px;
  outline:none;
  transition: border-color .25s var(--ease), background .25s var(--ease);
}
.searchbar input:focus{border-color: rgba(167,139,250,.45); background: var(--surface2)}
.chips{
  display:flex; gap:8px; flex-wrap:wrap;
  padding:0 14px 14px;
}
.chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:9px 12px;
  border-radius:999px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.06);
  color:var(--muted);
  font-size:12px;
}
.chip button{
  border:none; background:transparent; color:var(--muted);
  cursor:pointer;
  padding:0;
}
.filter-row{
  display:flex; gap:10px; flex-wrap:wrap;
  padding:0 14px 14px;
}

.filter-details{
  position:relative;
}
.filter-summary{
  list-style:none;
  display:inline-flex; align-items:center; gap:10px;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid var(--stroke);
  background: var(--surface);
  cursor:pointer;
  color:var(--text);
  user-select:none;
}
.filter-summary::-webkit-details-marker{display:none}
.filter-details[open] .chev{transform:rotate(180deg)}
.filter-panel{
  margin-top:10px;
  min-width:240px;
  max-width:min(72vw, 360px);
  border:1px solid var(--stroke);
  border-radius:12px;
  background: var(--surface);
  box-shadow: var(--shadow2);
  padding:10px;
}
.filter-panel .item{
  display:flex; align-items:center; gap:10px;
  padding:8px 10px;
  border-radius:10px;
  cursor:pointer;
}
.filter-panel .item:hover{background:rgba(0,0,0,.04)}
[data-theme="dark"] .filter-panel .item:hover{background:rgba(255,255,255,.06)}
.filter-panel input{accent-color:var(--text)}

.filter-panel .swatch{display:none}

.dropdown{
  position:relative;
}
.dropbtn{
  display:inline-flex; align-items:center; gap:10px;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid var(--stroke);
  background: var(--surface);
  cursor:pointer;
  color:var(--text);
}
.dropbtn small{color:var(--muted)}
.menu{
  position:absolute; top:calc(100% + 10px); left:0;
  min-width: 240px;
  max-width: min(72vw, 340px);
  border:1px solid var(--stroke);
  border-radius:12px;
  background: var(--surface);
  box-shadow: var(--shadow2);
  padding:10px;
  display:none;
  z-index:50;
}
.menu.show{display:block; animation: pop .22s var(--ease)}
@keyframes pop{from{opacity:0; transform: translateY(-6px) scale(.98)} to{opacity:1; transform: translateY(0) scale(1)}}
.menu .item{
  display:flex; gap:10px; align-items:center;
  padding:10px 10px;
  border-radius:14px;
  cursor:pointer;
  color:var(--muted);
  transition: background .2s var(--ease), transform .2s var(--ease);
}
.menu .item:hover{background: rgba(255,255,255,.08); transform: translateY(-1px); color:var(--text)}
.menu .item input{accent-color: var(--accent);}

.hr{height:1px; background:var(--stroke); margin:14px 0}


.pdfbox{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.05);
  border-radius: var(--radius2);
  overflow: visible;
}
.pdf-toolbar{
  display:flex; flex-wrap:wrap; gap:10px;
  align-items:center; justify-content:space-between;
  padding:12px 12px;
  border-bottom:1px solid var(--stroke);
  background: rgba(255,255,255,.05);
}
.pdf-canvaswrap{
  display:flex; justify-content:center;
  padding:14px;
}
.pdf-canvaswrap canvas{
  width:min(100%, 980px);
  height:auto;
  border-radius:18px;
  box-shadow: var(--shadow2);
  background:white;
}


.footer{
  border-top:1px solid var(--stroke);
  padding:22px 0;
  margin-top:30px;
  color:var(--muted);
}
.footer .row{
  display:flex; gap:12px; align-items:center; justify-content:space-between;
  flex-wrap:wrap;
}
.footer b{color:var(--text)}


.reveal{opacity:0; transform: translateY(14px)}
.reveal.is-in{opacity:1; transform: translateY(0)}


.toast{
  position:fixed; left:50%; bottom:18px;
  transform: translateX(-50%);
  z-index:90;
  padding:12px 14px;
  border-radius:16px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,.42);
  backdrop-filter: blur(var(--glass-blur));
  color:var(--text);
  box-shadow: var(--shadow2);
  opacity:0;
  pointer-events:none;
}
:root[data-theme="light"] .toast{background: rgba(255,255,255,.70)}
.toast.show{opacity:1; pointer-events:auto; animation: toastIn .25s var(--ease)}
@keyframes toastIn{from{transform: translateX(-50%) translateY(10px) scale(.98)} to{transform: translateX(-50%) translateY(0) scale(1)}}


.index-stage{
  height:100dvh;
  display:grid;
  place-items:center;
  padding:20px;
}
.hero{
  width:min(980px, calc(100% - 16px));
  border:1px solid var(--stroke);
  border-radius: min(40px, 5vw);
  background: linear-gradient(180deg, var(--card2), var(--card));
  backdrop-filter: blur(var(--glass-blur));
  box-shadow: var(--shadow);
  overflow: visible;
  position:relative;
}
.hero .glassline{
  position:absolute; inset:0;
  background: radial-gradient(600px 260px at 20% 20%, rgba(255,255,255,.12), transparent 60%),
              radial-gradient(900px 420px at 80% 15%, rgba(255,255,255,.08), transparent 65%);
  pointer-events:none;
}
.hero .content{
  padding:28px 22px;
}
.hero-head{
  display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap;
}
.hero-brand{display:flex; gap:14px; align-items:center}
.hero-brand img{width:62px; height:62px; border-radius:22px; box-shadow: var(--shadow2)}
.hero-brand h1{margin:0; font-size:22px}
.hero-brand p{margin:4px 0 0; color:var(--muted); font-size:13px}
.hero-grid{
  margin-top:18px;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
}
@media (max-width:720px){
  .hero-grid{grid-template-columns:1fr}
}
.hero-tile{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.06);
  border-radius: 22px;
  padding:14px;
  position:relative;
  overflow: visible;
  transition: transform .25s var(--ease), background .25s var(--ease), border-color .25s var(--ease);
}
.hero-tile:hover{transform: translateY(-2px); background: rgba(255,255,255,.10); border-color: rgba(167,139,250,.35)}
.hero-tile b{display:block; margin-bottom:6px}
.hero-tile span{color:var(--muted); font-size:13px}


.kbd{
  padding:6px 10px;
  border:1px solid var(--stroke);
  border-radius:12px;
  background: rgba(255,255,255,.06);
  color:var(--muted);
  font-size:12px;
}


@media (prefers-reduced-motion: reduce){
  *{animation:none !important; transition:none !important}
  .blob{filter: blur(14px)}
}


:root{
  --card: transparent;
  --card2: transparent;
  --glass-blur: 0px;
  --radius: 12px;
  --radius2: 16px;
  --stroke: rgba(255,255,255,.22);
}
:root[data-theme="light"]{
  --stroke: rgba(0,0,0,.18);
}


.glass, .card, .panel, .sidebar, .topbar, .drawer, .pill, .chip, .modal, .toast{
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}


.sidebar, .topbar, .drawer{
  background: rgba(0,0,0,.16) !important;
  border: 1px solid var(--stroke) !important;
  box-shadow: none !important;
}
:root[data-theme="light"] .sidebar,
:root[data-theme="light"] .topbar,
:root[data-theme="light"] .drawer{
  background: rgb(248, 248, 255) !important;
}


.card, .panel, .box{
  background: transparent !important;
  border: 1px solid var(--stroke) !important;
  box-shadow: none !important;
}


.btn, .iconbtn, .textbtn{
  appearance:none;
  border: 1px solid var(--stroke) !important;
  background: transparent !important;
  color: var(--text) !important;
  border-radius: 8px !important;
  padding: 10px 14px !important;
  font-weight: 600;
  letter-spacing: .2px;
  box-shadow: none !important;
  transition: transform .15s var(--ease), background .15s var(--ease), border-color .15s var(--ease), color .15s var(--ease);
}
.btn:hover, .iconbtn:hover, .textbtn:hover{
  background: rgba(255,255,255,.06) !important;
  transform: translateY(-1px);
}
:root[data-theme="light"] .btn:hover,
:root[data-theme="light"] .iconbtn:hover,
:root[data-theme="light"] .textbtn:hover{
  background: rgba(0,0,0,.04) !important;
}
.btn:active, .iconbtn:active, .textbtn:active{ transform: translateY(0px) scale(.99); }


.linkbtn{
  border: none !important;
  padding: 8px 6px !important;
  border-radius: 8px !important;
  background: transparent !important;
  text-decoration: none;
}
.linkbtn:hover{ background: rgba(255,255,255,.06) !important; }
:root[data-theme="light"] .linkbtn:hover{ background: rgba(0,0,0,.04) !important; }


.hamburger{
  width: 44px;
  height: 40px;
  padding: 0 !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text);
}

.hamburger:focus-visible{ outline: 2px solid rgba(110,168,255,.6); outline-offset: 2px; border-radius: 10px; }


@media (min-width: 981px){
  .hamburger,
  .toplogo{
    display:none !important;
  }
}
.burger{
  display:flex;
  flex-direction:column;
  gap:5px;
}
.burger i{
  display:block;
  width:18px;
  height:2px;
  background: currentColor;
  border-radius: 2px;
}
.sr-only{
  position:absolute;
  width:1px;height:1px;
  padding:0;margin:-1px;
  overflow: visible;clip:rect(0,0,0,0);
  white-space:nowrap;border:0;
}


.chip{
  background: transparent !important;
  border: 1px solid var(--stroke) !important;
}
.chip .x{ border-left: 1px solid var(--stroke) !important; }

.chips:empty {
  display: none;
  padding: 0;
  margin: 0;
}



.home{
  min-height:100vh;
  display:grid;
  place-items:center;
  position:relative;
  overflow: visible;
}
.home::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.55)),
    url("../assets/img/home-bg.jpg") center/cover no-repeat;
  transform: scale(1.02);
}
:root[data-theme="light"] .home::before{
  background:
    linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.55)),
    url("../assets/img/home-bg.jpg") center/cover no-repeat;
}
.home-inner{
  position:relative;
  z-index:2;
  width:min(980px, calc(100% - 48px));
  text-align:center;
  padding: 40px 0;
}
.home-logo{
  width: 92px;
  height: 92px;
  object-fit: contain;
  opacity:.95;
}
.home-mark{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 14px;
}
.home-rule{
  width:min(620px, 92%);
  height:1px;
  background: rgba(255,255,255,.45);
}
:root[data-theme="light"] .home-rule{
  background: rgba(0,0,0,.35);
}
.home-title{
  font-size: clamp(32px, 5vw, 64px);
  letter-spacing: 6px;
  margin: 12px 0 6px;
}
.home-sub{
  margin:0;
  color: var(--muted);
  font-weight: 600;
}
.home-actions{
  margin-top: 28px;
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  justify-content:center;
}
.home-actions a{
  min-width: 140px;
}
.home-meta{
  margin-top: 26px;
  display:flex;
  justify-content:center;
  gap: 14px;
  flex-wrap:wrap;
  color: rgba(255,255,255,.80);
}
:root[data-theme="light"] .home-meta{ color: rgba(0,0,0,.70); }



:root{
  --surface: #0b1222;
  --surface2:#0f172a;
}
:root[data-theme="light"]{
  --surface:#ffffff;
  --surface2:#f3f4f6;
}


.card, .panel, .topbar, .sidebar, .drawer, .footer, .pill{
  -webkit-backdrop-filter:none !important;
  backdrop-filter:none !important;
  box-shadow:none !important;
}


.sidebar{ background: var(--surface2) !important; }
.topbar{ background: var(--surface) !important; border-bottom:1px solid var(--stroke); }
.drawer{ background: var(--surface2) !important; }
.card, .panel{ background: var(--surface) !important; border:1px solid var(--stroke); }


.crumbs{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:14px;
  color:var(--muted);
  white-space:nowrap;
  overflow: visible;
  text-overflow:ellipsis;
}
.crumbs a{
  color:var(--text);
  text-decoration:none;
  border-bottom:1px solid transparent;
  padding:2px 0;
}
.crumbs a:hover{ border-bottom-color: currentColor; }
.crumbs .sep{ opacity:.55; }
.crumbs .current{ color:var(--muted); }


.btn, .textbtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  text-align:center;
}


@media (min-width: 981px){
  .sidebar{
    display:flex;
    flex-direction:column;
    min-height:100vh;
  }
  .sidebar .side-actions{
    margin-top:auto;
    padding:16px 14px 18px;
    border-top:1px solid var(--stroke);
  }
}


.drawer{
  display:flex;
  flex-direction:column;
}
.drawer .side-actions{
  margin-top:auto;
  padding-top:14px;
  border-top:1px solid var(--stroke);
}

.drawerClose{
  margin-left:auto;
  width:36px;
  height:36px;
  border:none;
  background:transparent;
  color:var(--text);
  border-radius:10px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  opacity:.92;
}
.drawerClose:hover{ background: rgba(0,0,0,.04); }
[data-theme="dark"] .drawerClose:hover{ background: rgba(255,255,255,.06); }
.drawerClose:active{ transform: translateY(1px); }
.drawerClose:focus-visible{ outline: 2px solid rgba(110,168,255,.6); outline-offset: 2px; }


.main{
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
.footer{
  margin-top:auto;
}

.toplogo{display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;border:1px solid var(--stroke);border-radius:10px;background:transparent;}
.toplogo img{width:22px;height:22px;object-fit:contain;}



[data-theme="light"] .brand img,
[data-theme="light"] .logoHero,
[data-theme="light"] img[data-role="logo"]{
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.25));
}




:root{
  --cat-admin:#D9EEFF;
  --cat-tech:#D6F3F1;  
  --cat-info:#E6F6D3;  
  --cat-plan:#E8DEFF;  
  --cat-art:#FFD8E6;   
  --cat-music:#FFF3C9; 
  --cat-misc:#F2E0CF;  
}
[data-theme="dark"]{
  --cat-admin:#2B3C4E;
  --cat-tech:#243E3D;
  --cat-info:#2B3A22;
  --cat-plan:#2E2642;
  --cat-art:#3B2430;
  --cat-music:#3A3322;
  --cat-misc:#3B2F22;
}



.task-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
@media (max-width: 880px){.task-grid{grid-template-columns:1fr}}
.task{
  border:1px solid var(--stroke);
  border-radius:14px;
  background: var(--surface);
  padding:14px;
  position:relative;
}
.task:before{
  content:"";
  position:absolute;left:0;top:0;bottom:0;width:6px;
  border-radius:14px 0 0 14px;
  background: var(--task-accent, var(--stroke));
}
.task-title{margin:0 0 6px;font-size:16px;font-weight:700}
.progress{height:10px;border-radius:999px;border:1px solid var(--stroke);background:transparent;overflow: visible;margin:10px 0 8px}
.progress .bar{height:100%;background:var(--task-accent,var(--text))}

#taskStats:empty {
  display: none;
}



.cal-controls{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.iconbtn{
  display:inline-flex;align-items:center;justify-content:center;
  width:38px;height:38px;border-radius:10px;
  border:1px solid var(--stroke);background:var(--surface);
  cursor:pointer;color:var(--text);
}
.iconbtn:hover{transform:translateY(-1px)}
.select{
  height:38px;border-radius:10px;border:1px solid var(--stroke);
  background:var(--surface);color:var(--text);padding:0 10px;
}
.cal-header{font-weight:700}
.calendar{width:100%}
.cal-weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;color:var(--muted);font-size:12px;padding:0 2px}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-top:8px}
.cal-cell{
  border:1px solid var(--stroke);border-radius:12px;
  background:var(--surface);min-height:110px;padding:10px;
  position:relative;overflow: visible;
}
.cal-cell.is-dim{opacity:.55}
.cal-cell.is-today{outline:2px solid rgba(0,0,0,.12)}
[data-theme="dark"] .cal-cell.is-today{outline:2px solid rgba(255,255,255,.18)}
.cal-date{font-size:12px;color:var(--muted);margin-bottom:6px}
.cal-evt{
  width:100%;text-align:left;
  border:none;border-radius:8px;
  padding:6px 8px;margin-top:6px;
  cursor:pointer;color:var(--text);
  font:inherit;font-weight:300;
}
.cal-evt:hover{transform:translateY(-1px)}
.cal-more{margin-top:6px;color:var(--muted);font-size:12px}
.week-row{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
.week-col{border:1px solid var(--stroke);border-radius:12px;background:var(--surface);padding:10px;min-height:160px}
.week-head{font-size:12px;color:var(--muted);margin-bottom:8px}
.week-evt{
  width:100%;text-align:left;border:none;background:transparent;
  padding:8px 8px;border-radius:10px;margin-top:6px;
  cursor:pointer;color:var(--text);
  border-left:6px solid var(--stroke);
}
.week-evt:hover{background:rgba(0,0,0,.04)}
[data-theme="dark"] .week-evt:hover{background:rgba(255,255,255,.06)}
.week-evt .t{display:block;font-weight:700}
.week-evt .m{display:block;color:var(--muted);font-size:12px;margin-top:2px}
.cal-list .list-evt{
  width:100%;text-align:left;
  border:1px solid var(--stroke);
  background:var(--surface);
  border-radius:12px;
  padding:12px;
  margin-top:10px;
  cursor:pointer;
  border-left:6px solid var(--stroke);
}
.cal-list .list-evt .t{font-weight:700;margin-bottom:4px}




.searchbar{display:flex; align-items:center; gap:10px; flex-wrap:nowrap}
.searchbar input{flex:1; min-width:0}
.searchbar .iconbtn{flex:0 0 auto}
.filter-row{display:flex; gap:12px; align-items:flex-start; flex-wrap:wrap}
.filter-row .meta-line{max-width:100%; white-space:normal}
#results{display:flex; flex-direction:column; gap:12px; width:100%}
.section-title p{max-width:100%}


.verSelect{
  height:38px;
  min-width: 168px;
  padding: 0 36px 0 12px;
  border-radius:8px;
  border:1px solid var(--stroke);
  background: var(--surface);
  color: var(--text);
  font-size: 13px;
  font-weight: 300;
  outline:none;
  appearance:none;
  -webkit-appearance:none;
  background-image: linear-gradient(45deg, transparent 50%, currentColor 50%), linear-gradient(135deg, currentColor 50%, transparent 50%);
  background-position: calc(100% - 18px) 50%, calc(100% - 12px) 50%;
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}

@media (max-width:560px){
  .verSelect{min-width: 140px}
}


.cal-events{display:flex; flex-direction:column; gap:6px}
.cal-evt{
  display:flex; align-items:center; gap:8px;
  background: color-mix(in oklab, var(--evc, var(--stroke)) 22%, transparent);
  border:1px solid color-mix(in oklab, var(--evc, var(--stroke)) 45%, var(--stroke));
}
.cal-evt .dot{
  width:8px;height:8px;border-radius:999px;
  background: var(--evc, var(--stroke));
  flex:0 0 auto;
}
.cal-evt .t{overflow: visible;text-overflow:ellipsis;white-space:nowrap}

.list-day{margin-top:12px}
.list-date{font-weight:700; font-size:13px; color:var(--muted); margin:6px 0}
.list-items{display:flex; flex-direction:column; gap:8px}
.list-ev{
  display:flex; flex-direction:column; align-items:flex-start;
  gap:4px;
  width:100%;
  text-align:left;
  border:1px solid var(--stroke);
  border-radius:12px;
  padding:10px 12px;
  background:var(--surface);
  cursor:pointer;
}
.list-ev:hover{transform:translateY(-1px)}
.list-ev .dot{
  width:8px;height:8px;border-radius:999px;background:var(--evc,var(--stroke));
  display:inline-block; margin-right:6px;
}
.list-ev .t{display:flex; align-items:center; gap:8px; font-weight:300}
.list-ev .m{font-size:12px; color:var(--muted)}



.modal-root{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,.35);
  z-index: 9999;
  padding:16px;
}
:root[data-theme="light"] .modal-root{ background: rgba(15,23,42,.28); }
.modal-root.open, .modal-root.show{ display:flex; }
.modal-card{
  width:min(760px, calc(100vw - 32px));
  max-height: calc(100vh - 32px);
  overflow:auto;
  background: var(--panel);
  border:1px solid var(--stroke);
  border-radius: 14px;
  box-shadow: var(--shadow2);
}
.modal-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:14px 14px 10px;
  border-bottom:1px solid var(--stroke);
}
.modal-title{ font-weight:600; }
.modal-body{ padding:14px; }
.modal-close{
  width:36px;height:36px;
  border-radius:10px;
  border:1px solid var(--stroke);
  background: transparent;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.modal-close:hover{ background: rgba(0,0,0,.04); }
:root[data-theme="dark"] .modal-close:hover{ background: rgba(255,255,255,.06); }


:root[data-theme="light"] img[data-role="logo"]{
  opacity:1 !important;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.35)) !important;
}


.filters{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
.filters .dd{flex:0 0 auto}
.hint{flex:1 1 280px; min-width:0;}
#results{margin-top: 10px;}


.modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
  padding:16px;
}
.modal.show{display:flex;}
.modal-backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.35);
}
:root[data-theme="light"] .modal-backdrop{ background: rgba(15,23,42,.28); }
.modal-card{
  position:relative;
  width:min(760px, calc(100vw - 32px));
  max-height: calc(100vh - 32px);
  overflow:auto;
  background: var(--panel);
  border:1px solid var(--stroke);
  border-radius:14px;
  box-shadow: var(--shadow2);
}


.collapse-head{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.collapse-right{display:flex;align-items:center;gap:12px;margin-left:auto}
.collapse-right .meta-line{white-space:nowrap}
.collapse-toggle{
  border:0 !important;
  background:transparent !important;
  padding:6px 8px;
  display:inline-flex;
  align-items:center;
  gap:8px;
  cursor:pointer;
  color:var(--text);
}
.collapse-toggle svg{transition:transform .18s ease}
.section-collapsed .collapse-toggle svg{transform:rotate(-90deg)}
.collapse-body{overflow: visible;max-height:20000px;transition:max-height .25s ease, opacity .2s ease, transform .2s ease;opacity:1;transform:translateY(0)}
.section-collapsed .collapse-body{max-height:0;opacity:0;transform:translateY(-4px)}



.topbar{ background: var(--surface) !important; backdrop-filter:none !important; -webkit-backdrop-filter:none !important; }
@media (max-width: 980px){ .toplogo{ display:none !important; } }
.hamburger{
  border:1px solid var(--stroke);
  background: var(--surface2);
  border-radius: 12px;
  box-shadow: none;
}
.burger i{
  width:20px;
  height:2px;
  border-radius: 3px;
  opacity: .92;
}
.hamburger:active{ transform: translateY(1px); }
.result{
  background: var(--surface);
  border:1px solid var(--stroke);
  border-radius: 16px;
  padding:14px 14px;
  box-shadow: none;
}
.result + .result{ margin-top: 12px; }
.result-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.detailbtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:10px 12px;
  min-width: 92px;
  border-radius: 12px;
  border:1px solid var(--stroke);
  background: var(--surface2);
  color: var(--text);
  text-decoration:none;
  font-weight:400;
  white-space:nowrap;
}
.detailbtn:hover{ filter: brightness(1.02); }


.backbtn{ padding:10px 12px; border-radius:12px; }
@media (max-width: 980px){
  .backbtn{ padding:8px 10px; border-radius:10px; font-size:14px; }
}
.detailbtn:active{ transform: translateY(1px); }
.modal-root, .modal{
  position:fixed; inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,.35);
  z-index: 80;
}
.modal-root.open, .modal-root.show, .modal.show{ display:flex; }
.modal-card{ background: var(--panel); }
.modal-close{
  background: var(--surface2);
}
:root[data-theme="light"] .modal-root, :root[data-theme="light"] .modal{ background: rgba(11,18,34,.22); }




.cda-scroll {
  max-height: 360px;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 8px;
  box-sizing: border-box;
}
@media (max-width: 768px){
  .cda-scroll{
    max-height: 50vh;
  }
}



.scrollbox{
  max-height: clamp(220px, 38vh, 420px);
  overflow: auto;
  padding-right: 6px;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
.scrollbox::-webkit-scrollbar{ width: 10px; height: 10px; }
.scrollbox::-webkit-scrollbar-thumb{
  background: rgba(120,120,120,.25);
  border-radius: 999px;
  border: 2px solid rgba(0,0,0,0);
  background-clip: padding-box;
}
.scrollbox::-webkit-scrollbar-thumb:hover{ background: rgba(120,120,120,.35); }



.btn, .iconbtn{
  border-radius:14px;
  transition: transform .18s var(--ease), background .18s var(--ease), border-color .18s var(--ease), box-shadow .18s var(--ease), color .18s var(--ease);
}
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0px) scale(.98); }
.btn.primary{
  background: color-mix(in oklab, var(--accent) 18%, transparent);
  border-color: color-mix(in oklab, var(--accent) 36%, var(--stroke));
}
.btn.primary:hover{
  background: color-mix(in oklab, var(--accent) 24%, transparent);
  box-shadow: 0 10px 24px rgba(0,0,0,.18);
}
.btn.ghost{
  background: transparent;
}



.topbar{
  background: var(--surface);
  border-bottom: 1px solid var(--stroke);
}
.container{ max-width: var(--max); }
@media (max-width: 820px){
  :root{ --gap:14px; --radius:18px; }
  .page{ padding: 14px 12px 24px; }
  .card{ border-radius: 18px; }
  .sidebar{ background: var(--surface); }
  .crumbs{ font-size: 13px; }
}
@media (min-width: 821px){
  .sidebar{ background: var(--surface); border-right:1px solid var(--stroke); }
  .page{ padding: 22px 22px 36px; }
  .card{ border-radius: 22px; }
}

#calendarWrap{ width:100%; min-height: 320px; }
@media (max-width: 820px){ #calendarWrap{ min-height: 420px; } }



.sortwrap{ display:flex; align-items:center; gap:8px; position:relative; }
.sortsel{
  appearance:none;
  padding:10px 34px 10px 12px;
  border:1px solid var(--stroke);
  border-radius:12px;
  background: var(--surface);
  color: var(--text);
  font: inherit;
  line-height: 1;
}
.sortwrap::after{
  content:"";
  position:absolute;
  right:12px; top:50%;
  width:10px; height:10px;
  border-right:2px solid currentColor;
  border-bottom:2px solid currentColor;
  transform: translateY(-60%) rotate(45deg);
  opacity:.75;
  pointer-events:none;
}
.latest-item{
  padding:10px 6px;
  border-bottom: 1px solid var(--stroke);
  cursor:pointer;
}
.latest-item:last-child{ border-bottom:none; }
.latest-title{ font-weight: 400; }
.latest-sub{ opacity:.85; font-size: 13px; margin-top:2px; }
.latest-meta{ opacity:.7; font-size: 12px; margin-top:4px; }

.task-controls{ margin: 10px 0 8px; display:flex; flex-direction:column; gap:10px; }
.task-controls-top{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
.searchline{ display:flex; gap:8px; align-items:center; flex:1 1 320px; }
.taskq{ flex:1; min-width:0; padding:10px 12px; border:1px solid var(--stroke); border-radius:12px; background: var(--surface); color: var(--text); }
.task-controls-filters{ display:flex; gap:10px; flex-wrap:wrap; }



.sort-inline{ margin-right: 10px; }
.collapse-right{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.sortsel{ min-width: 150px; }
@media (max-width:820px){
  .sortsel{ min-width: 140px; }
  .sort-inline{ margin-right: 0; }
}



#calendarWrap{
  max-height: clamp(320px, 42vh, 520px);
  overflow:auto;
  padding-right:6px;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
@media (max-width:820px){
  #calendarWrap{ max-height: 360px; }
  .cal-cell{ min-height: 92px; padding:8px; }
}
.cal-evt{ max-width:100%; }
.cal-evt .t{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  min-width:0;
}


:root{
  --bg0:#f1f3f6;
  --bg1:#f1f3f6;
  --card:#ffffff;
  --card2:#f7f8fa;
  --text:#1f2733;
  --muted:rgba(31,39,51,.66);
  --line:rgba(31,39,51,.14);
  --shadow:0 14px 30px rgba(31,39,51,.10);
  --shadow2:0 10px 22px rgba(31,39,51,.08);
  --accent:rgba(61,72,90,1);
  --accentSoft:rgba(61,72,90,.14);
  --danger:rgba(239,68,68,1);
  --radius:16px;
  --radius2:20px;
  --glass:0;
}

html[data-theme="dark"]{
  --bg0:#2a2f37;
  --bg1:#2a2f37;
  --card:#303642;
  --card2:#2d333e;
  --text:#e8edf6;
  --muted:rgba(232,237,246,.72);
  --line:rgba(232,237,246,.12);
  --shadow:0 16px 34px rgba(0,0,0,.28);
  --shadow2:0 10px 22px rgba(0,0,0,.22);
  --accent:rgba(209,216,226,1);
  --accentSoft:rgba(209,216,226,.12);
  --danger:rgba(251,113,133,1);
}


body{
  background:var(--bg0) !important;
}
body::after{
  content:"";
  position:fixed !important;
  inset:0 !important;
  z-index:-4 !important;
  pointer-events:none !important;
  background:var(--bg0) !important;
}
body::before{
  position:fixed !important;
  z-index:-3 !important;
  pointer-events:none !important;
}


.card{
  background:var(--card) !important;
  border:1px solid var(--line) !important;
  box-shadow:var(--shadow) !important;
  backdrop-filter:none !important;
}


.topbar{
  background:var(--card) !important;
  border-bottom:1px solid var(--line) !important;
  backdrop-filter:none !important;
}


.sidebar{
  background:var(--card2) !important;
  border-right:1px solid var(--line) !important;
}


.btn, .iconbtn, .detailbtn, .backbtn, .chip button{
  border-left:0 !important;
  border-right:0 !important;
  border-top:1px solid var(--line) !important;
  border-bottom:1px solid var(--line) !important;
  border-radius:0 !important;
  background:transparent !important;
  color:var(--text) !important;
  box-shadow:none !important;
}
.btn:hover, .iconbtn:hover, .detailbtn:hover, .backbtn:hover{
  color:var(--accent) !important;
  border-color:var(--line) !important;
}
html[data-theme="dark"] .btn:hover,
html[data-theme="dark"] .iconbtn:hover,
html[data-theme="dark"] .detailbtn:hover,
html[data-theme="dark"] .backbtn:hover{
  border-color:var(--line) !important;
}
.btn.primary{
  color:var(--accent) !important;
  border-color:var(--line) !important;
}
html[data-theme="dark"] .btn.primary{
  border-color:var(--line) !important;
}
.btn:active, .iconbtn:active, .detailbtn:active, .backbtn:active{
  transform:translateY(1px) !important;
}


.searchbar, input, select, textarea{
  background:var(--card) !important;
  border-color:var(--line) !important;
  color:var(--text) !important;
}


.chip{
  background:transparent !important;
  border:1px solid var(--line) !important;
  color:var(--muted) !important;
}


.shell, .layout, .content, .main, .page, .container, .row, .filters, .filter-row, .chips{
  min-width:0 !important;
}
.card, .card *{
  min-width:0;
}
.task, .task *{
  min-width:0;
  overflow-wrap:anywhere;
}
.task-title{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
#calendarWrap{
  max-height:380px !important;
  overflow:auto !important;
  -webkit-overflow-scrolling:touch;
}
.cal-evt .t{
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  white-space:nowrap !important;
}


.policy, .policy .wrap{
  color:var(--text);
}


.drawer{background:var(--card) !important;}
.overlay{background:rgba(0,0,0,.35) !important;}
html[data-theme="light"] .drawer{background:var(--card) !important;}


html[data-theme="dark"] a{color: var(--text);} 
html[data-theme="dark"] a:hover{color: var(--muted);} 

html[data-theme="dark"] .nav a{color: var(--text) !important;}
html[data-theme="dark"] .nav a:hover{color: var(--text) !important; background: var(--card2) !important;}

.result.clickable{cursor:pointer}
.result.clickable:hover{border-color:var(--line)}

.drawer{backdrop-filter:none !important; opacity:1 !important;}

html[data-theme="dark"] .result{background:var(--card) !important; border:1px solid var(--line) !important;}
html[data-theme="dark"] .result-title{color:var(--text) !important;}
html[data-theme="dark"] .meta-line{color:var(--muted) !important;}

html[data-theme="dark"] .cal-cell{background:var(--card2) !important;}

.nav .dot{background:var(--muted) !important;}

.btn:hover, .detailbtn:hover{color:var(--text) !important; text-decoration:underline; text-underline-offset:3px;}

html[data-theme="dark"] .btn:hover, html[data-theme="dark"] .detailbtn:hover{color:var(--text) !important;}


/* Global loading overlay (added) */
.global-loading{position:fixed; inset:0; z-index:9999; display:none;}
.global-loading.show{display:block;}
.global-loading-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35);} 
.global-loading-box{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); min-width:220px; max-width:90vw; padding:16px 18px; border-radius:14px; background:var(--card); border:1px solid var(--line); box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; align-items:center; gap:12px;}
.global-loading-text{font-size:14px; color:var(--text);}
.spinner{width:18px; height:18px; border-radius:50%; border:2px solid var(--line); border-top-color:var(--text); animation:spin 0.9s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
html.is-loading{cursor:progress;}
html.is-loading body{pointer-events:none;}
html.is-loading #globalLoading{pointer-events:auto;}
