<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>暗夜飛鳶工作室 線上資訊庫</title>
  <meta name="description" content="暗夜飛鳶工作室 線上資訊庫 — 公告、規章、企劃、會議等文件的集中索引與版本歷史瀏覽。" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link href="assets/css/style.css" rel="stylesheet" />
  <!-- Lunr (search) -->
  <script defer src="https://cdn.jsdelivr.net/npm/lunr/lunr.min.js"></script>
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@2.47.0/tabler-icons.min.css">
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <div class="logo">🜲</div>
      <div class="titles">
        <h1>暗夜飛鳶工作室 線上資訊庫</h1>
        <p>公告‧規章‧企劃‧會議｜可搜尋、分類、標籤、版本歷史與 PDF 閱讀</p>
      </div>
    </div>
    <div class="search-row">
      <div class="search-box">
        <i class="ti ti-search"></i>
        <input id="q" type="search" placeholder="搜尋：標題、編號、作者、標籤、分類… (Ctrl+/ 聚焦)" autocomplete="off" />
        <button id="clearSearch" class="ghost" aria-label="清除搜尋"><i class="ti ti-x"></i></button>
      </div>
      <div class="filters">
        <select id="filterCategory" aria-label="分類">
          <option value="">全部分類</option>
          <option value="公告">公告</option>
          <optgroup label="規章">
            <option value="規章/團體規章">規章／團體規章</option>
            <option value="規章/部組規章">規章／部組規章</option>
          </optgroup>
          <optgroup label="企劃">
            <option value="企劃/企劃提案書">企劃／企劃提案書</option>
            <option value="企劃/企劃書">企劃／企劃書</option>
            <option value="企劃/職務報告">企劃／職務報告</option>
            <option value="企劃/財務報告">企劃／財務報告</option>
          </optgroup>
          <optgroup label="會議">
            <option value="會議/會議公告">會議／會議公告</option>
            <option value="會議/會議紀錄">會議／會議紀錄</option>
          </optgroup>
        </select>
        <input id="filterTag" type="text" placeholder="標籤過濾（以空白分隔，可多個）" aria-label="標籤過濾" />
        <select id="sortBy" aria-label="排序">
          <option value="updated_desc">最近更新優先</option>
          <option value="uploaded_desc">最近上傳優先</option>
          <option value="number_asc">編號（升冪）</option>
          <option value="title_asc">標題（A→Z）</option>
        </select>
      </div>
    </div>
  </header>

  <main class="layout">
    <aside class="side">
      <h3>快速分類</h3>
      <nav id="quickCats" class="chips"></nav>
      <h3>常用標籤</h3>
      <div id="hotTags" class="chips"></div>
    </aside>
    <section class="content">
      <div id="stats" class="stats"></div>
      <ul id="docList" class="cards"></ul>
      <div id="emptyState" class="empty hidden">
        <i class="ti ti-inbox"></i>
        <p>沒有符合條件的文件。</p>
      </div>
    </section>
  </main>

  <!-- Document Drawer -->
  <div id="drawer" class="drawer hidden" role="dialog" aria-modal="true" aria-labelledby="docTitle">
    <div class="drawer-panel">
      <button id="drawerClose" class="ghost close" aria-label="關閉面板"><i class="ti ti-x"></i></button>
      <div class="drawer-body">
        <h2 id="docTitle">—</h2>
        <p id="docMeta" class="meta">—</p>
        <div class="tags" id="docTags"></div>
        <div class="version-row">
          <label for="versionSelect">版本：</label>
          <select id="versionSelect" aria-label="版本"></select>
          <button id="openPdf" class="primary"><i class="ti ti-file-type-pdf"></i> 開啟 PDF</button>
          <a id="downloadPdf" class="ghost" download><i class="ti ti-download"></i> 下載</a>
        </div>
        <details class="history">
          <summary><i class="ti ti-history"></i> 版本歷史</summary>
          <ul id="versionTimeline" class="timeline"></ul>
        </details>
        <iframe id="pdfFrame" title="PDF 檢視器" class="pdf-frame" loading="lazy"></iframe>
      </div>
    </div>
    <div class="backdrop"></div>
  </div>

  <footer class="site-footer">
    <p>© <span id="year"></span> 暗夜飛鳶工作室 · 線上資訊庫｜本網站為純前端、以 GitHub Pages 部署。修改資料：請更新 <code>data/docs.json</code> 與 <code>docs/</code> 內檔案。</p>
  </footer>

  <script defer src="assets/js/app.js"></script>
</body>
</html>
