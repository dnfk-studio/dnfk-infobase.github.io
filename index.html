<!doctype html>
<html lang="zh-Hant">

<head>
  <script>
    (function() {
      function forceMaintenanceRedirect() {
        console.warn("系統偵測到異常，強制進入維護模式");
        if (!location.pathname.includes("/maintenance")) {
          location.replace("/maintenance?v=" + Date.now());
        }
      }


      function ensureBootLoading() {
        if (document.getElementById('dnfk-boot-loading')) return;
        if (!document.getElementById('dnfk-boot-loading-style')) {
          var st = document.createElement('style');
          st.id = 'dnfk-boot-loading-style';
          st.textContent =
            "html.dnfk-boot-lock, html.dnfk-boot-lock body{overflow:hidden}" +
            "#dnfk-boot-loading{position:fixed;inset:0;z-index:99999;display:flex;align-items:center;justify-content:center;" +
            "background:rgba(0,0,0,.55);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}" +
            "#dnfk-boot-loading .spinner{width:42px;height:42px;border-radius:50%;border:3px solid rgba(255,255,255,.25);" +
            "border-top-color:rgba(255,255,255,.85);animation:dnfkSpin .9s linear infinite}" +
            "@keyframes dnfkSpin{to{transform:rotate(360deg)}}";
          document.head.appendChild(st);
        }
        var ov = document.createElement('div');
        ov.id = 'dnfk-boot-loading';
        ov.setAttribute('role', 'status');
        ov.setAttribute('aria-live', 'polite');
        ov.innerHTML = "<div class='spinner' aria-label='Loading'></div>";
        document.documentElement.appendChild(ov);
        document.documentElement.classList.add('dnfk-boot-lock');
      }

      function removeBootLoading() {
        var ov = document.getElementById('dnfk-boot-loading');
        if (ov) ov.remove();
        document.documentElement.classList.remove('dnfk-boot-lock');
      }

      ensureBootLoading();

      var cfg = document.createElement('script');
      var apiUrl = "/api/data/config.js";
      cfg.src = apiUrl + "?v=" + Date.now();
      
      cfg.onload = function() {
        try {
          console.log("維護模式狀態:", window.__DNFK_MAINTENANCE__);
          if (typeof window.__DNFK_MAINTENANCE__ === 'undefined') {
              throw new Error("Config not loaded properly");
          }

          if (window.__DNFK_MAINTENANCE__) {
            if (!location.pathname.includes("/maintenance")) {
              location.replace("/maintenance?v=" + Date.now());
              return;
            }
            removeBootLoading();
          } else {
            removeBootLoading();
          }
        } catch (e) {
          console.error("檢查維護模式時發生錯誤", e);
          forceMaintenanceRedirect();
        }
      };
      
      cfg.onerror = function() {
          console.error("讀取維護設定失敗 (Network Error)");
          forceMaintenanceRedirect();
      };
      
      document.head.appendChild(cfg);
    })();
  </script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="color-scheme" content="dark light"/>
  <link rel="icon" href="assets/img/logo-dark.png"/>
  <link rel="stylesheet" href="assets/css/style.css?v=0382456498756"/>
  <title>首頁｜DNFK Info-Base</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
</head>

<body>
  <canvas id="starfield" aria-hidden="true"></canvas>
  <section class="home" aria-label="首頁">
    <div class="home-inner" id="homeIntro">
      <div class="home-mark">
        <img data-role="logo" class="home-logo" src="assets/img/logo-dark.png" alt="暗夜飛鳶工作室 DNFK Studio"/>
        <div class="home-rule" aria-hidden="true"></div>

        <div>
          <h1 class="home-title">線上資訊庫</h1>
          <p class="home-sub">暗夜飛鳶工作室 DNFK Studios</p>
        </div>

        <div class="home-rule" aria-hidden="true"></div>

        <nav class="home-actions" aria-label="快速連結">
          <a class="btn" href="/search">文書查詢</a>
          <a class="btn" href="/about-site">關於本網站</a>
          <a class="btn" href="/about-studio">關於本工作室</a>
          <a class="btn" href="/cda-project">校園偵探社特別專案</a>
        </nav>

        
      </div>
    </div>
  </section>

  <script type="module" src="assets/js/index.js"></script>
</body>
</html>